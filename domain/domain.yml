version: "3.1"

slots:
  product_name:
    type: text
  user_identifier:
    type: text
  saleor_question_type:   # "price" | "availability" | "user_info"
    type: text
  channel_slug:
    type: text
    initial_value: "default-channel"   # action will prefer slot, else env
    influence_conversation: false
  saleor_last_answer:
    type: text
    influence_conversation: false
  saleor_last_queries:
    type: text
    influence_conversation: false
  kg_message:
    type: text
    influence_conversation: true
  kg_raw_response:
    type: any
    influence_conversation: false
  kg_error:
    type: text
    influence_conversation: false
  kg_document_names:
    type: text   # optional, e.g., "fileA.pdf,fileB.pdf"
    influence_conversation: false
  kg_products:
    type: list
    influence_conversation: true
  kg_specs_by_product:
    type: any
    influence_conversation: false
  kg_sources:
    type: list
    influence_conversation: false
  context_products:
    type: list
    influence_conversation: true
  saleor_last_error:
    type: text
    influence_conversation: false
  # # KG control + outputs
  kg_mode:
    type: text
    influence_conversation: false
    mappings:
      - type: custom


responses:
  utter_ask_product_name:
    - text: "Which product are you asking about?"
  utter_ask_user_identifier:
    - text: "What is your account email or ID?"

actions:
  - action_saleor_graphql
  - action_query_knowledge_graph

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
